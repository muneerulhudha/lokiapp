<html>
<head>
	<meta charset=utf-8 />
	<title>Loki App</title>

	<!-- Latest compiled and minified CSS -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">

	<!-- Optional theme -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap-theme.min.css">

	<!-- Latest compiled and minified JavaScript -->
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>

	<style>
		.btn{

			background: transparent;
			color: #F2F2F2;

			-webkit-transition: background .2s ease-in-out, border .2s ease-in-out;
			-moz-transition: background .2s ease-in-out, border .2s ease-in-out;
			-ms-transition: background .2s ease-in-out, border .2s ease-in-out;
			-o-transition: background .2s ease-in-out, border .2s ease-in-out;
			transition: background .2s ease-in-out, border .2s ease-in-out;

		}
	</style>

</head>
<body style = "background: black">
  
  <!-- <input type="text" id="latitude" placeholder="latitude">
  <input type="text" id="longitude" placeholder="longitude"> -->
  <div class="col-md-4" style = "background-color: black">
  		<img id="image" src="" style="max-width:100%; max-height:100%; margin-top: 12px"/>
  		<br /><br /><br /><br />
  		<div align="center">
  		<button type="button" class="btn btn-primary btn-block">Submit</button>
  		</div>
  </div>
  <div class="col-md-8" style = "border: 5px solid black;">
  		<div id="map" style="width:100%; height:97%; margin-top: 8px"></div>
  </div>
  <script src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false"></script>
  <script>
  	function GetImage() {
	    var xmlhttp = new XMLHttpRequest();
	    xmlhttp.onreadystatechange = function(){
	    	if (xmlhttp.readyState==4 && xmlhttp.status==200)
		    {
		    	var jsonObj = xmlhttp.responseText;

		    	document.getElementById("image").src = JSON.parse(jsonObj).url;
		    }
	    }
	    xmlhttp.open("GET","http://localhost:8080/api/images/554e4d86dc9d54326b00000d",true);
	    xmlhttp.send();
	}

	function initialize() {
		var $latitude = document.getElementById('latitude');
		var $longitude = document.getElementById('longitude');
		var latitude = 50.715591133433854
		var longitude = -3.53485107421875;
		var zoom = 7;
		
		var LatLng = new google.maps.LatLng(latitude, longitude);
		
		var mapOptions = {
			zoom: zoom,
			center: LatLng,
			mapTypeControl: false,
			panControl: false,
			zoomControl: false,
			scaleControl: true,
			mapTypeId: google.maps.MapTypeId.ROADMAP
		}	
		
		var map = new google.maps.Map(document.getElementById('map'),mapOptions);
		
		var nolabels = [
		{
		    featureType: "all",
		    elementType: "labels",
		    stylers: [
		      { visibility: "off" }
		    ]   
		  }
		];      
		
		map.setOptions({styles: nolabels});

		var marker = new google.maps.Marker({
			position: LatLng,
			map: map,
			title: 'Drag Me!',
			draggable: true
		});
		
		google.maps.event.addListener(marker, 'dragend', function(marker){
			var latLng = marker.latLng;
			$latitude.value = latLng.lat();
			$longitude.value = latLng.lng();
		});
		
		
	}
	initialize();
	GetImage();
	</script>
  
</body>
</html>